<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head>
  <head>
    <script defer src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>


    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4F8KTHDP9M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4F8KTHDP9M');
    </script>
    
    
    
    <title>Ray Peat on pregnenolone</title>
    <meta charset="utf-8">
    <meta name="description" content="Explore the wisdom of Ray Peat by topics    " />
    <meta name="dc.relation" content="https://raypeatexplained.com" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#1A94D2" />

    

    
    <link rel="stylesheet" href="../css/styles.min.css" media="screen">

    
    <link rel='shortcut icon' type='image/x-icon' href='../favicon.ico' />
    
    <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>

    <style>
         
        .search-box {
            margin-bottom: 20px;
            text-align: center;
        }

        .search-box input {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            min-width: calc(50% - 20px);
             
        }

        .highlight {
            background-color: yellow;
             
        }
    </style>

</head>
</head>

<body>


  <header class="">
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="https://raypeatexplained.com/">Ray Peat Explained</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link  " href="https://raypeatexplained.com/">Home</a>              </li>

              
              
          </div>
        </div>
      </nav>

  </header>
  <div class="container-fluid">
    <main>
      


<div class="container pb-5 mt-4">
  <h1 class="mb-3" style="text-transform: capitalize;">Ray Peat on pregnenolone</h1>
  
  
  
  
  <div class="search-box">
    <button class="btn btn-primary" id="sort-by-popularity">Sort by popularity</button>

    <input type="text" id="quoteSearch" placeholder="Search quotes...">
  </div>

 

  


  <div id="quotesContainer"> 
  <p>
<div class="quote"  data-upvotes="0" data-quote-id="315690752420905405761460113815609115426">
    <div id='315690752420905405761460113815609115426' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Thyroid Hormone&#39;s Role in Cholesterol Conversion</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Thyroid tends to lower cholesterol by converting it into pregnenolone and other steroids,"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Email Response by Ray Peat</p>
        <button class="upvote-button" onclick="upvote('315690752420905405761460113815609115426')">Upvote</button>
          <span class="upvote-counter" id="315690752420905405761460113815609115426-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('315690752420905405761460113815609115426');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="321186242650234779454691768668915704806">
    <div id='321186242650234779454691768668915704806' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Pregnenolone&#39;s Indirect Role in Hormonal Balance and Stress</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Pregnenolone doesnt have the direct hormonal effects, but its the precursor, and by stopping exaggerated stress reactions it is likely to help"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Email Response by Ray Peat</p>
        <button class="upvote-button" onclick="upvote('321186242650234779454691768668915704806')">Upvote</button>
          <span class="upvote-counter" id="321186242650234779454691768668915704806-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('321186242650234779454691768668915704806');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="287492984988835911635815716834102341638">
    <div id='287492984988835911635815716834102341638' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Pregnenolone&#39;s Influence on Steroid Hormones and Stress Mitigation</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Pregnenolone isnt a hormone, but it normalizes the steroid hormones, preventing excess cortisol and helping to normalize aldosterone, so it should be helpful for any stress including surgery. P"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Email Response by Ray Peat</p>
        <button class="upvote-button" onclick="upvote('287492984988835911635815716834102341638')">Upvote</button>
          <span class="upvote-counter" id="287492984988835911635815716834102341638-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('287492984988835911635815716834102341638');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="25556843327975924999487732901964622118">
    <div id='25556843327975924999487732901964622118' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Progesterone&#39;s Non-Suppressive Effect on Its Synthesis</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"The fact that progesterone (and probably pregnenolone) stimulates its own synthesis means that taking it does not suppress the bodys ability to synthesize it, as happens with cortisol. Sometimes, one dose or a few doses can restore the bodys ability to produce enough of its own."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('25556843327975924999487732901964622118')">Upvote</button>
          <span class="upvote-counter" id="25556843327975924999487732901964622118-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('25556843327975924999487732901964622118');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="54728469832628773171134516237208193743">
    <div id='54728469832628773171134516237208193743' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Higher Brain Levels of Certain Hormones Decrease with Age</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"The brain contains much more pregnenolone, DHEA, and progesterone than do other organs or the blood, and these levels decrease progressively with age."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('54728469832628773171134516237208193743')">Upvote</button>
          <span class="upvote-counter" id="54728469832628773171134516237208193743-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('54728469832628773171134516237208193743');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="103224246697061281364459345099480791788">
    <div id='103224246697061281364459345099480791788' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Steroids&#39; Reversal of Aging Skin and Hair Growth Restoration</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"People who studied the effects of steroids on aging skin found that the steroids which reversed structural age changes in the skin (progesterone, testosterone, pregnenolone) sometimes restored hair growth"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('103224246697061281364459345099480791788')">Upvote</button>
          <span class="upvote-counter" id="103224246697061281364459345099480791788-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('103224246697061281364459345099480791788');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="145404057032943256284725130157989936503">
    <div id='145404057032943256284725130157989936503' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Concerns Over Administering DHEA Without Balanced Hormones</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Since DHEA can be easily metabolized into testosterone (by the skin, for example), and into estrogen, I dont think it should ever be administered alone, without an approximately natural balance of pregnenolone and progesterone."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('145404057032943256284725130157989936503')">Upvote</button>
          <span class="upvote-counter" id="145404057032943256284725130157989936503-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('145404057032943256284725130157989936503');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="314413367231570286954744832509167707933">
    <div id='314413367231570286954744832509167707933' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Pregnenolone as a Precursor, Implications for DHEA</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Pregnenolone is the material the body uses to form either progesterone or DHEA. Other natural hormones, including DHEA, havent been studied for so long, but the high levels which are normally present in healthy people would suggest that replacement doses, to restore those normal levels, would not be likely to produce toxic side effects."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('314413367231570286954744832509167707933')">Upvote</button>
          <span class="upvote-counter" id="314413367231570286954744832509167707933-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('314413367231570286954744832509167707933');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="226720192508907104552731788752077080345">
    <div id='226720192508907104552731788752077080345' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Importance of Thyroid, Pregnenolone, Vitamin E in Fertility</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Thyroid and pregnenolone and vitamin E are as important for male fertility as thyroid and progesterone and vitamin E are for female fertility. (For example, supplementary thyroid and pregnenolone can raise a mans sperm count, by overcoming the effects of stress.)"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('226720192508907104552731788752077080345')">Upvote</button>
          <span class="upvote-counter" id="226720192508907104552731788752077080345-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('226720192508907104552731788752077080345');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="328732544658342244187974669284951328481">
    <div id='328732544658342244187974669284951328481' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Energy Production Optimization for Regenerative Abilities</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"If we optimize the known factors which improve energy production (red light, short-chain and medium-chain saturated fats, and pregnenolone, for example), to the extent that our metabolism resembles that of a ten year old child, I dont think there is any reason to suppose that we wouldnt have the regenerative, healing abilities which are common at that age. I suspect that both brain growth and remodeling might proceed indefinitely."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('328732544658342244187974669284951328481')">Upvote</button>
          <span class="upvote-counter" id="328732544658342244187974669284951328481-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('328732544658342244187974669284951328481');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="332726231764836871059298839943484533622">
    <div id='332726231764836871059298839943484533622' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Mitochondrial Damage Affects Hormone Production and Energy</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Since the protective hormones depend on the ability of mitochondria to convert cholesterol into pregnenolone, it is clear that damage to mitochondria will affect our supply of protective hormones at the same time that our energy supply is failing, forcing us to shift to the atrophy-producing stress hormones, including cortisol."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Generative Energy  Restoring The Wholeness Of Life</p>
        <button class="upvote-button" onclick="upvote('332726231764836871059298839943484533622')">Upvote</button>
          <span class="upvote-counter" id="332726231764836871059298839943484533622-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('332726231764836871059298839943484533622');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="110087223776256196405016171863986878922">
    <div id='110087223776256196405016171863986878922' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Progesterone&#39;s Effect on Brain Allopregnanolone Levels</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Taking progesterone reliably increases the brain content of allopregnanolone, with a small oral dose of progesterone tripling (196% increase) the concentration of allopregnanolone (Andréen, et al., 2006). Supplementing pregnenolone also increases allopregnanolone."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('110087223776256196405016171863986878922')">Upvote</button>
          <span class="upvote-counter" id="110087223776256196405016171863986878922-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('110087223776256196405016171863986878922');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="107664213847123115300636182272316685383">
    <div id='107664213847123115300636182272316685383' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Cholesterol&#39;s Role in Neurosteroid Production</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Cholesterol is the precursor to pregnenolone, progesterone, and the other neurosteroids, and its own properties include stabilizing effects similar to progesterone’s."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('107664213847123115300636182272316685383')">Upvote</button>
          <span class="upvote-counter" id="107664213847123115300636182272316685383-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('107664213847123115300636182272316685383');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="6553284565678470109585488331934077567">
    <div id='6553284565678470109585488331934077567' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Factors for Healthier Pregnancies and Postpartum Life</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"the most important factors that can be optimized with existing resources. Healthier pregnancies will result in healthier and happier postpartum life. Some of these factors would be sunlight, vitamin D, milk, cheese, eggs, fruits and well cooked vegetables, fibrous foods, and optimizing thyroid function and pregnenolone and progesterone (which support mitochondrial function, protecting against aldosterone, parathyroid hormone, excess serotonin, CRK, and cortisol, besides increasing allopregnanolone), and using the safest antiinflammatory and antiserotonin drugs, such as aspirin and cyproheptadine, when they are needed."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('6553284565678470109585488331934077567')">Upvote</button>
          <span class="upvote-counter" id="6553284565678470109585488331934077567-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('6553284565678470109585488331934077567');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="43735762738923240380754095762893663195">
    <div id='43735762738923240380754095762893663195' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Progesterone Therapy for Male Infertility and Athlete’s Infertility</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Progesterone is the precursor (following acetate and cholesterol) for all of the other steroid hormones, so it can be used in men. It (or its precursor, pregnenolone) has been used for prostatitis, arthritis, and infertility in men. Large amounts, though, would probably suppress LH, and lower testosterone synthesis, but a smaller amount (especially in old men) seems to increase sperm count and motility. In male and female athletes who become infertile, it would seem to be the appropriate therapy, generally in combination with thyroid."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Nutrition For Women </p>
        <button class="upvote-button" onclick="upvote('43735762738923240380754095762893663195')">Upvote</button>
          <span class="upvote-counter" id="43735762738923240380754095762893663195-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('43735762738923240380754095762893663195');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="337011033749784667961348197762845681844">
    <div id='337011033749784667961348197762845681844' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Reversing Liver Degradation through Diet</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"A lifetime of accumulating PUFA progressively degrades the liver’s protective functions, but those functions can gradually be restored by providing carbohydrates and saturated fats without the polyunsaturated fats, along with some of the factors that have been depleted along with free cholesterol, especially pregnenolone and progesterone."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- September 2018 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('337011033749784667961348197762845681844')">Upvote</button>
          <span class="upvote-counter" id="337011033749784667961348197762845681844-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('337011033749784667961348197762845681844');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>
</p>

  </div>  
</div>


    </main>
    <footer>
      <footer class="footer fixed-bottom bg-dark">

    

  

  
  
  <script src="../js/bundle.min.js" defer></script>
      <script src="../js/main.f8356cbfc3b51bb24c286205b62461b46aaa5a219dac170a24f1692c6ff4154a.js" integrity="sha256-&#43;DVsv8O1G7JMKGIFtiRhtGqqWiGdrBcKJPFpLG/0FUo=" crossorigin="anonymous"></script>
</footer>
    </footer>
  </div>

  <script defer type="module">
    
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js';
    import { getFirestore, doc, onSnapshot, setDoc, updateDoc, increment, getDocs, collection, serverTimestamp, addDoc } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore.js';
    import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js';


    const firebaseConfig = {
      apiKey: "AIzaSyBNTOHPQHCasjzKwje2P78-q6p1hsXQkW4",
      authDomain: "ray-peat-explained.firebaseapp.com",
      projectId: "ray-peat-explained",
      storageBucket: "ray-peat-explained.appspot.com",
      messagingSenderId: "791071522728",
      appId: "1:791071522728:web:3df2e0f7e4c0b66d4a679d"
    };


    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    async function signInAnonymouslyAndUpvote(upvote_id) {
      try {
        
        const userCredential = await signInAnonymously(auth);
        const user = userCredential.user;

        
        if (user) {
          console.log(`User is signed in anonymously with uid: ${user.uid}`);

          
          const upvoteData = {
            anonymousUserId: user.uid,
            upvote_id: upvote_id,
            timeOfUpvote: serverTimestamp(),
          };

          
          const docRef = await addDoc(collection(db, "upvotes"), upvoteData);
          console.log("Document written with ID: ", docRef.id);
        } else {
          console.log("User sign-in failed");
        }
      } catch (error) {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.error(`Error code: ${errorCode}, Message: ${errorMessage}`);
      }
    }

    
    function setUpQuoteListener(quoteId) {
      const quoteRef = doc(db, "quotes", quoteId);

      onSnapshot(quoteRef, (docSnapshot) => {
        const upvotesSpan = document.getElementById(`${quoteId}-count`);
        if (docSnapshot.exists()) {
          upvotesSpan.textContent = docSnapshot.data().upvotes;
        } else {
          
          setDoc(quoteRef, { upvotes: 0 })
            .then(() => { upvotesSpan.textContent = "0"; })
            .catch((error) => {
              console.error("Error creating document: ", error);
            });
        }
      });
    }

    
    function upvote(quoteId) {
      const quoteRef = doc(db, "quotes", quoteId);

      
      updateDoc(quoteRef, {
        upvotes: increment(1)
      }).catch((error) => {
        console.error("Error updating document: ", error);
      });

      signInAnonymouslyAndUpvote(quoteId).catch((error) => {
        console.error("Error updating document II: ", error);
      });

    }

    
    window.upvote = upvote;

    
    document.addEventListener('DOMContentLoaded', () => {
      
      const quoteContainers = document.querySelectorAll('.quote-container');

      
      quoteContainers.forEach(container => {
        const quoteId = container.id;
        setUpQuoteListener(quoteId);
      });
    });

    document.getElementById("sort-by-popularity").addEventListener('click', async () => {
      try {
        
        const querySnapshot = await getDocs(collection(db, 'quotes'));
        const upvotesMap = new Map();  

        querySnapshot.forEach(doc => {
          
          upvotesMap.set(doc.id, doc.data().upvotes);
        });

        
        const quoteElems = document.querySelectorAll('.quote');

        
        quoteElems.forEach(quoteElem => {
          const quoteId = quoteElem.getAttribute('data-quote-id');
          const upvotes = upvotesMap.get(quoteId) || 0; 
          quoteElem.setAttribute('data-upvotes', upvotes);
        });

        
        const quoteArray = Array.from(quoteElems);
        quoteArray.sort((a, b) => {
          return b.getAttribute('data-upvotes') - a.getAttribute('data-upvotes');
        });

        
        const quotesContainer = document.getElementById('quotesContainer');
        quotesContainer.innerHTML = ''; 

        
        quoteArray.forEach(quote => {
          quotesContainer.appendChild(quote);
        });
      } catch (err) {
        console.error('Error fetching upvotes: ', err);
      }
    });

    window.copyLinkToClipboard = function copyLinkToClipboard(id) {
      
      const urlWithHash = `${window.location.href.split('#')[0]}#${id}`;
    
      
      navigator.clipboard.writeText(urlWithHash).then(() => {
        
      }).catch(err => {
        console.error("Could not copy text: ", err);
      });
    }

    window.highlightDiv=  function highlightDiv(hash) {
      
      document.querySelectorAll('.highlight-quote').forEach((el) => {
        el.classList.remove('highlight-quote');
      });
    
      
      if (hash !== '') {
        const id = hash.replace('#', '');
        const divToHighlight = document.getElementById(id);
        if (divToHighlight) {
          divToHighlight.classList.add('highlight-quote');
          console.log("Quote selected")
    
          
          divToHighlight.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      }
    }
    
    
    window.addEventListener('hashchange', () => window.highlightDiv(window.location.hash));
    window.addEventListener('DOMContentLoaded', () => window.highlightDiv(window.location.hash));
    
  </script>

</body>

</html>