<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head>
  <head>
    <script defer src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>


    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4F8KTHDP9M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4F8KTHDP9M');
    </script>
    
    
    
    <title>Ray Peat on depression</title>
    <meta charset="utf-8">
    <meta name="description" content="Explore the wisdom of Ray Peat by topics    " />
    <meta name="dc.relation" content="https://raypeatexplained.com" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#1A94D2" />

    

    
    <link rel="stylesheet" href="../css/styles.min.css" media="screen">

    
    <link rel='shortcut icon' type='image/x-icon' href='../favicon.ico' />
    
    <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>

    <style>
         
        .search-box {
            margin-bottom: 20px;
            text-align: center;
        }

        .search-box input {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            min-width: calc(50% - 20px);
             
        }

        .highlight {
            background-color: yellow;
             
        }
    </style>

</head>
</head>

<body>


  <header class="">
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="https://raypeatexplained.com/">Ray Peat Explained</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link  " href="https://raypeatexplained.com/">Home</a>              </li>

              
              
          </div>
        </div>
      </nav>

  </header>
  <div class="container-fluid">
    <main>
      


<div class="container pb-5 mt-4">
  <h1 class="mb-3" style="text-transform: capitalize;">Ray Peat on depression</h1>
  
  
  
  
  <div class="search-box">
    <button class="btn btn-primary" id="sort-by-popularity">Sort by popularity</button>

    <input type="text" id="quoteSearch" placeholder="Search quotes...">
  </div>

 

  


  <div id="quotesContainer"> 
  <p>
<div class="quote"  data-upvotes="0" data-quote-id="94500990312697433411281710403350728706">
    <div id='94500990312697433411281710403350728706' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Lithium&#39;s Treatment for Mood Disorders</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Lithium has been used for many years to treat various mood disorders, including anxiety and depression, and it reduces activation of the NMDA system, possibly by binding ammonia."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- January 2017 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('94500990312697433411281710403350728706')">Upvote</button>
          <span class="upvote-counter" id="94500990312697433411281710403350728706-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('94500990312697433411281710403350728706');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="323037011501087445999593506655836625546">
    <div id='323037011501087445999593506655836625546' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Hypothyroidism, Stress, and Related Physiological Complications</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Hypothyroid people, with low production of CO2, are very susceptible to stress-induced hyperventilation, and they are often in a state of physiological hyperventilation. They are susceptible to over-production of ammonia (De Nardo, et al., 1999; Marti, et al., 1988) and lactate (Zarzeczny, et al., 1996), and to psychosis, especially depression and mania."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- July 2017 - Ray Peat&#39;s Newsletter</p>
        <button class="upvote-button" onclick="upvote('323037011501087445999593506655836625546')">Upvote</button>
          <span class="upvote-counter" id="323037011501087445999593506655836625546-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('323037011501087445999593506655836625546');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="327159632466272016849832239438835610916">
    <div id='327159632466272016849832239438835610916' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">The Pervasive Role of Inflammation in Degeneration</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Inflammation is involved in the chronic degenerative conditions, especially atrophy and cancer, and even in depression"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- March 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('327159632466272016849832239438835610916')">Upvote</button>
          <span class="upvote-counter" id="327159632466272016849832239438835610916-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('327159632466272016849832239438835610916');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="111307282819622940504232566954430229706">
    <div id='111307282819622940504232566954430229706' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Animal Communication Through Body Language</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"All animals use body language to communicate—when a facial expression or gesture or stance is perceived, the ability to mimic means that the feeling behind the gesture is simultaneously perceived."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2018 - Ray Peats Newsletter</p>
        <button class="upvote-button" onclick="upvote('111307282819622940504232566954430229706')">Upvote</button>
          <span class="upvote-counter" id="111307282819622940504232566954430229706-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('111307282819622940504232566954430229706');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="5929186014667274907768622329745638542">
    <div id='5929186014667274907768622329745638542' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Estrogen, Serotonin, and Drug Company Manipulation</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Drug company manipulation of information about estrogen has been more extreme than its treatment of serotonin. Activated by stress, along with serotonin, it is one of the major activators of the corticotropin release hormone, CRH, which activates the pituitary and adrenal glands, and promotes inflammation, and is a major factor in PPD (Glynn and Sandman, 29014, HahnHolbrook, 2016), as well as in other types of depression, and aging, and Alzheimer’s disease."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('5929186014667274907768622329745638542')">Upvote</button>
          <span class="upvote-counter" id="5929186014667274907768622329745638542-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('5929186014667274907768622329745638542');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="289064322687376399102871190303489605578">
    <div id='289064322687376399102871190303489605578' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Estrogen, Serotonin, and Female-Predominant Diseases</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"If it weren’t for the advertising culture, it would probably be generally recognized that both estrogen and serotonin have important roles in causing depression, migraine, and Alzheimer’s disease, all of which occur much more often in women than in men."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('289064322687376399102871190303489605578')">Upvote</button>
          <span class="upvote-counter" id="289064322687376399102871190303489605578-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('289064322687376399102871190303489605578');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="134143842754975401604989301913509661418">
    <div id='134143842754975401604989301913509661418' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Postpartum Cholesterol and Mental Health</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Several studies have observed an association of lower postpartum cholesterol with symptoms of anxiety and depression"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('134143842754975401604989301913509661418')">Upvote</button>
          <span class="upvote-counter" id="134143842754975401604989301913509661418-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('134143842754975401604989301913509661418');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="160377536803024827009731551607493361119">
    <div id='160377536803024827009731551607493361119' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Postpartum Progesterone and Brain Health</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"With insufficient cholesterol, the normally high postpartum concentration of progesterone isn’t likely to be maintained, and instead of brain restoration, the various pro-inflammatory effects of serotonin and estrogen will predominate, with effects such as depression, joint pain, anxiety, and brain edema."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- May 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('160377536803024827009731551607493361119')">Upvote</button>
          <span class="upvote-counter" id="160377536803024827009731551607493361119-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('160377536803024827009731551607493361119');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="277772700888788250374950461068156020983">
    <div id='277772700888788250374950461068156020983' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Low Cholesterol and Mental Health Implications</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Low serum cholesterol has been associated with depression, suicide, violence, and increased cancer mortality. Since statins enter the brain, and inhibit the synthesis of cholesterol there, decreased mitochondrial function is undoubtedly a factor in the mental side effects that they can produce."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- November 2018 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('277772700888788250374950461068156020983')">Upvote</button>
          <span class="upvote-counter" id="277772700888788250374950461068156020983-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('277772700888788250374950461068156020983');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="7936127522035676046568452303433891415">
    <div id='7936127522035676046568452303433891415' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Aromatase Activity and Hormonal Impact at Menopause</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Aromatase, the enzyme that produces estrogen, is present in muscles, fat, blood vessels, and many other tissues, and its activity is increased by cortisol, and decreased by progesterone. The changed activity of these two steroids at menopause can account for the sudden increase in the degenerative diseases, inflammation, depression, etc."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- November 2020 - Ray Peat&#39;s Newsletter  </p>
        <button class="upvote-button" onclick="upvote('7936127522035676046568452303433891415')">Upvote</button>
          <span class="upvote-counter" id="7936127522035676046568452303433891415-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('7936127522035676046568452303433891415');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="113818058645314401302413599740082026538">
    <div id='113818058645314401302413599740082026538' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Progesterone&#39;s Role in Various Medical Conditions</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"While progesterone might seem to cure almost everything, we should be careful to use it only when the biochemical mechanism is fairly evident. A progesterone deficiency can be misdiagnosed, as (for example) epilepsy, Brights disease, multiple sclerosis, or even estrogen deficiency (as in menopause). It can affect susceptibility to many conditions including herpes infections, dizziness, dysperception, varicose veins, mastitis, fibroma, and endometriosis. Cyclic edema, depression, and migraine are, in my experience, always stopped by progesterone."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Nutrition For Women </p>
        <button class="upvote-button" onclick="upvote('113818058645314401302413599740082026538')">Upvote</button>
          <span class="upvote-counter" id="113818058645314401302413599740082026538-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('113818058645314401302413599740082026538');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="18005257835797338602790023749743691888">
    <div id='18005257835797338602790023749743691888' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Progesterone Treatment Effects on Veins and Suicidal Depression</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"Just as veins in the forehead shrink immediately if a large amount of sugar is taken for a migraine, I have seen veins (back of hand) disappear with progesterone treatment, just when a suicidal depression is lifting. This suggests that there may be a migraine condition in the blood vessels of the limbic system of the brain, but there are also very rapid shifts in brain chemistry."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Nutrition For Women </p>
        <button class="upvote-button" onclick="upvote('18005257835797338602790023749743691888')">Upvote</button>
          <span class="upvote-counter" id="18005257835797338602790023749743691888-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('18005257835797338602790023749743691888');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="49891501556067666700305487428687014579">
    <div id='49891501556067666700305487428687014579' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Gas Problems and Hypothyroidism&#39;s Digestive Impact</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"If gas is a problem even when change of diet isnt responsible, a thyroid deficiency should be considered. Lack of stomach acid is typical in hypothyroidism, but is only one aspect of a generalized digestive depression."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- Nutrition For Women </p>
        <button class="upvote-button" onclick="upvote('49891501556067666700305487428687014579')">Upvote</button>
          <span class="upvote-counter" id="49891501556067666700305487428687014579-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('49891501556067666700305487428687014579');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="32453773385988400959936138534307295857">
    <div id='32453773385988400959936138534307295857' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">Parathyroid Hormone Reduction Linked to Obesity and Related Issues</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"The reduction of parathyroid hormone by increased calcium and vitamin D is closely related to reduced obesity, and to the health problems associated with obesity—hypertension, insulin resistance, heart arrhythmias, depression, and various inflammatory conditions."</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- September 2017 - Ray Peat&#39;s Newsletter</p>
        <button class="upvote-button" onclick="upvote('32453773385988400959936138534307295857')">Upvote</button>
          <span class="upvote-counter" id="32453773385988400959936138534307295857-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('32453773385988400959936138534307295857');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>


<div class="quote"  data-upvotes="0" data-quote-id="83279674920248427457487146244783349373">
    <div id='83279674920248427457487146244783349373' class="quote-container" style="margin: 10px; padding: 5px; background-color: #f9f9f9; border-left: 4px solid #5a5a5a;">
        <b style="font-style: italic; color: #333;">BBB and Cellular Stress: Evidence in Blood</b>
        <p style="margin-bottom: 10px; font-size: 18px; color: #555;">"The Blood Brain Barrier, BBB, has sometimes been treated as something unique, but it’s just a special case of the cellular resistance that exists everywhere. For example, after intense exercise that produces fatigue and damage to muscles, a unique brain protein, S100B, that is considered a crucial part of the BBB, can be found in the blood stream. The exchange of substances, even proteins and nucleic acids, between cells and their environment, increases during stress. The detection of substances such as S100B in the blood is now recognized as evidence of depression and brain damage"</p>
        <p style="font-size: 16px; text-align: right; color: #777;">- September 2019 - Ray Peat&#39;s Newsletter </p>
        <button class="upvote-button" onclick="upvote('83279674920248427457487146244783349373')">Upvote</button>
          <span class="upvote-counter" id="83279674920248427457487146244783349373-count">0</span> upvotes
          <button class="btn btn-primary" onclick="copyLinkToClipboard('83279674920248427457487146244783349373');">Copy Link to Quote</button>
    </div>
    
    <hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));">
</div>
</p>

  </div>  
</div>


    </main>
    <footer>
      <footer class="footer fixed-bottom bg-dark">

    

  

  
  
  <script src="../js/bundle.min.js" defer></script>
      <script src="../js/main.f8356cbfc3b51bb24c286205b62461b46aaa5a219dac170a24f1692c6ff4154a.js" integrity="sha256-&#43;DVsv8O1G7JMKGIFtiRhtGqqWiGdrBcKJPFpLG/0FUo=" crossorigin="anonymous"></script>
</footer>
    </footer>
  </div>

  <script defer type="module">
    
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js';
    import { getFirestore, doc, onSnapshot, setDoc, updateDoc, increment, getDocs, collection, serverTimestamp, addDoc } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore.js';
    import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js';


    const firebaseConfig = {
      apiKey: "AIzaSyBNTOHPQHCasjzKwje2P78-q6p1hsXQkW4",
      authDomain: "ray-peat-explained.firebaseapp.com",
      projectId: "ray-peat-explained",
      storageBucket: "ray-peat-explained.appspot.com",
      messagingSenderId: "791071522728",
      appId: "1:791071522728:web:3df2e0f7e4c0b66d4a679d"
    };


    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    async function signInAnonymouslyAndUpvote(upvote_id) {
      try {
        
        const userCredential = await signInAnonymously(auth);
        const user = userCredential.user;

        
        if (user) {
          console.log(`User is signed in anonymously with uid: ${user.uid}`);

          
          const upvoteData = {
            anonymousUserId: user.uid,
            upvote_id: upvote_id,
            timeOfUpvote: serverTimestamp(),
          };

          
          const docRef = await addDoc(collection(db, "upvotes"), upvoteData);
          console.log("Document written with ID: ", docRef.id);
        } else {
          console.log("User sign-in failed");
        }
      } catch (error) {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.error(`Error code: ${errorCode}, Message: ${errorMessage}`);
      }
    }

    
    function setUpQuoteListener(quoteId) {
      const quoteRef = doc(db, "quotes", quoteId);

      onSnapshot(quoteRef, (docSnapshot) => {
        const upvotesSpan = document.getElementById(`${quoteId}-count`);
        if (docSnapshot.exists()) {
          upvotesSpan.textContent = docSnapshot.data().upvotes;
        } else {
          
          setDoc(quoteRef, { upvotes: 0 })
            .then(() => { upvotesSpan.textContent = "0"; })
            .catch((error) => {
              console.error("Error creating document: ", error);
            });
        }
      });
    }

    
    function upvote(quoteId) {
      const quoteRef = doc(db, "quotes", quoteId);

      
      updateDoc(quoteRef, {
        upvotes: increment(1)
      }).catch((error) => {
        console.error("Error updating document: ", error);
      });

      signInAnonymouslyAndUpvote(quoteId).catch((error) => {
        console.error("Error updating document II: ", error);
      });

    }

    
    window.upvote = upvote;

    
    document.addEventListener('DOMContentLoaded', () => {
      
      const quoteContainers = document.querySelectorAll('.quote-container');

      
      quoteContainers.forEach(container => {
        const quoteId = container.id;
        setUpQuoteListener(quoteId);
      });
    });

    document.getElementById("sort-by-popularity").addEventListener('click', async () => {
      try {
        
        const querySnapshot = await getDocs(collection(db, 'quotes'));
        const upvotesMap = new Map();  

        querySnapshot.forEach(doc => {
          
          upvotesMap.set(doc.id, doc.data().upvotes);
        });

        
        const quoteElems = document.querySelectorAll('.quote');

        
        quoteElems.forEach(quoteElem => {
          const quoteId = quoteElem.getAttribute('data-quote-id');
          const upvotes = upvotesMap.get(quoteId) || 0; 
          quoteElem.setAttribute('data-upvotes', upvotes);
        });

        
        const quoteArray = Array.from(quoteElems);
        quoteArray.sort((a, b) => {
          return b.getAttribute('data-upvotes') - a.getAttribute('data-upvotes');
        });

        
        const quotesContainer = document.getElementById('quotesContainer');
        quotesContainer.innerHTML = ''; 

        
        quoteArray.forEach(quote => {
          quotesContainer.appendChild(quote);
        });
      } catch (err) {
        console.error('Error fetching upvotes: ', err);
      }
    });

    window.copyLinkToClipboard = function copyLinkToClipboard(id) {
      
      const urlWithHash = `${window.location.href.split('#')[0]}#${id}`;
    
      
      navigator.clipboard.writeText(urlWithHash).then(() => {
        
      }).catch(err => {
        console.error("Could not copy text: ", err);
      });
    }

    window.highlightDiv=  function highlightDiv(hash) {
      
      document.querySelectorAll('.highlight-quote').forEach((el) => {
        el.classList.remove('highlight-quote');
      });
    
      
      if (hash !== '') {
        const id = hash.replace('#', '');
        const divToHighlight = document.getElementById(id);
        if (divToHighlight) {
          divToHighlight.classList.add('highlight-quote');
          console.log("Quote selected")
    
          
          divToHighlight.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      }
    }
    
    
    window.addEventListener('hashchange', () => window.highlightDiv(window.location.hash));
    window.addEventListener('DOMContentLoaded', () => window.highlightDiv(window.location.hash));
    
  </script>

</body>

</html>